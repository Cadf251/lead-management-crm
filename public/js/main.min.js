(()=>{function i(t,e="",o=null){fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e}).then(r=>r.json()).then(r=>(console.log(r),o!==null&&typeof o=="function"&&o(r),r))}var g=null;function n(t,e,o=!0,r=null){let a=document.querySelector(".warning");g=r,a.innerHTML=`
    <div>
      <b class="warning__titulo">${t}</b>
      <p class="warning__descricao">${e}</p>

      <div class="warning__buttons">
        ${o?`
              <button class="small-btn small-btn--blue" data-warning-confirm="true">Sim</button>
              <button class="small-btn small-btn--red" data-warning-confirm="false">Cancelar</button>
            `:`
              <button class="small-btn small-btn--blue" data-warning-confirm="true">Ok</button>
            `}
      </div>
    </div>
  `,a.classList.add("warning--show")}function q(){document.addEventListener("click",t=>{let e=t.target.closest("[data-warning-confirm]");if(!e)return;let o=e.dataset.warningConfirm==="true";document.querySelector(".warning").classList.remove("warning--show"),o&&typeof g=="function"&&g(),g=null}),document.addEventListener("DOMContentLoaded",()=>{let t=document.getElementById("session-warning");if(!t)return;let e=t.dataset.warningTitulo,o=t.dataset.warningMensagem,r=t.dataset.warningAsk==="true";n(e,o,r)})}function y(){let t=document.querySelector(".js--overlay"),e=document.querySelector(".js--body"),o=document.querySelector(".js--overlay-content"),r=document.querySelector(".js--overlay-close");r!==null&&r.addEventListener("click",()=>{t.classList.contains("overlay--oculto")||n("Deseja fechar?","Todo progresso ser\xE1 descartado.",!0,()=>{t.classList.add("overlay--oculto"),e.classList.remove("congelado"),o.innerHTML=""})})}function c(){let t=document.querySelector(".js--overlay"),e=document.querySelector(".js--body");t.classList.contains("overlay--oculto")&&(t.classList.remove("overlay--oculto"),e.classList.add("congelado"))}function d(t){let e=document.querySelector(".js--overlay-content");e.innerHTML=t}function b(){i("http://crm.local/criar-usuario/","",t=>{c(),d(t.html)})}var s="http://crm.local/";function m(t,e){var o=document.querySelector(e);o.innerHTML=t}function h(t){var e=document.querySelector(t);e.remove()}function x(t,e){var o=e.usuarioId,r=e.usuarioNome;n("Deseja desativar o usu\xE1rio "+r+"?","Ele perder\xE1 o acesso, mas seus dados continuar\xE3o no hist\xF3rico do sistema.",!0,()=>{i(s+"desativar-usuario/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}function E(t,e){var o=e.usuarioId;i(s+"editar-usuario/"+o,"",r=>{c(),d(r.html)})}function w(t,e){var o=e.usuarioId,r=e.usuarioNome;n("Deseja reativar o usu\xE1rio "+r+"?","Ele ter\xE1 acesso a praticamente tudo que tinha antes.",!0,()=>{i(s+"/reativar-usuario/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}function I(t,e){var o=e.usuarioId,r=e.usuarioNome;n("Deseja reenviar o email do "+r+"?","O email de redefini\xE7\xE3o de senha senha enviado.",!0,()=>{i(s+"/reenviar-email/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}function L(t,e){var o=e.usuarioId,r=e.usuarioNome;n("Deseja resetar a senha do "+r+"?","Ao resetar a senha, ser\xE1 enviado o email para o usu\xE1rio criar uma nova.",!0,()=>{i(s+"resetar-senha/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}var S={"usuario:criar":b,"usuario:editar":E,"usuario:reenviar-email":I,"usuario:desativar":x,"usuario:reativar":w,"usuario:resetar-senha":L};function j(t,e){var o=e.equipeId,r=e.equipeNome;n("Deseja despausar a equipe "+r+"?","Ela voltar\xE1 a receber leads normalmente.",!0,()=>{i(s+"/ativar-equipe/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}function N(){i("http://crm.local/criar-equipe/","",t=>{c(),d(t.html)})}function C(t,e){var o=e.equipeId,r=e.equipeNome;n("Deseja desativar a equipe "+r+"?","Ela ser\xE1 completamente exclu\xEDda.",!0,()=>{i(s+"/desativar-equipe/"+o,"",a=>{h(".card--"+o),n(a.alerta,a.mensagens,!1)})})}function T(t,e){var o=e.equipeId;i("http://crm.local/editar-equipe/"+o,"",r=>{c(),d(r.html)})}function W(){let t=document.querySelector(".js--usuario-select");if(console.log("acessado"),t===null)return;console.log(t);let e=document.querySelector(".js--usuario-funcao");console.log(e);let o=e.querySelector("option[value='2']");console.log(o),t.addEventListener("change",()=>{let a=t.value.split(","),u=parseInt(a[1]);console.log(u),u>=3?(e.selectedIndex=0,o.disabled=!1):(e.selectedIndex=0,o.disabled=!0)})}function R(t,e){var o=e.equipeId;i(s+"novo-colaborador/"+o,"",r=>{c(),d(r.html),W()})}function D(t,e){var o=e.equipeId,r=e.equipeNome;n("Deseja pausar a equipe "+r+"?","Ela n\xE3o receber\xE1 leads enquanto estiver pausada.",!0,()=>{i(s+"/congelar-equipe/"+o,"",a=>{m(a.html,".card--"+o),n(a.alerta,a.mensagens,!1)})})}var O={"equipe:criar":N,"equipe:editar":T,"equipe:desativar":C,"equipe:pausar":D,"equipe:ativar":j,"colaborador:novo":R};var B={...S,...O};function A(){document.addEventListener("click",t=>{let e=t.target.closest("[data-action]");if(!e)return;let o=e.dataset.action;B[o]?.(e,e.dataset)})}function U(){let t=document.querySelector(".js--nav"),e=document.querySelector(".js--main"),o=document.querySelector(".js--nav-button");var r=t.classList,a=e.classList;o.addEventListener("click",()=>{let l=localStorage.getItem("navExpandida")==="true";p(!l,r,a),localStorage.setItem("navExpandida",!l)});function u(){let l=localStorage.getItem("navExpandida")==="true";p(l,r,a),r.contains("nav--preload")&&r.remove("nav--preload")}function p(l,f,v){l?(f.remove("nav--recolhido"),f.add("nav--extendido"),v.remove("main--recolhido"),v.add("main--extendido")):(f.remove("nav--extendido"),f.add("nav--recolhido"),v.remove("main--extendido"),v.add("main--recolhido"))}u()}function k(){document.addEventListener("change",function(t){let e=t.target;(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.tagName==="SELECT")&&e.closest(".js--form-edit")&&(e.classList.contains("input--changed")||e.classList.add("input--changed"))})}function z(){let t=document.createElement("div"),o=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)/2;t.className="tooltip";function r(u){let p=u.getAttribute("title");p&&(u.dataset.tooltipText=p,u.hasAttribute("data-tooltip-applied")||(u.removeAttribute("title"),u.setAttribute("data-tooltip-applied","true"),u.addEventListener("mouseenter",()=>{t.textContent=u.dataset.tooltipText,t.style.opacity=1}),u.addEventListener("mousemove",l=>{t.style.top=`${l.pageY+12}px`,l.pageX<o?t.style.left=`${l.pageX+12}px`:t.style.left=`${l.pageX-t.offsetWidth-12}px`}),u.addEventListener("mouseleave",()=>{t.style.opacity=0})))}window.onload=()=>{document.body.appendChild(t),document.querySelectorAll("[title]").forEach(r),a.observe(document.body,{attributes:!0,subtree:!0,attributeFilter:["title"]})};let a=new MutationObserver(u=>{u.forEach(p=>{p.type==="attributes"&&p.attributeName==="title"&&r(p.target)})})}U();y();q();A();k();z();})();
